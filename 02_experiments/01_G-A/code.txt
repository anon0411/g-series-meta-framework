#ê´€ì¸¡ì´ êµ¬ì¡° ìœ ì§€ì— ê¸°ì—¬í•˜ëŠ”ê°€


%matplotlib inline
from qiskit import QuantumCircuit, Aer, transpile
from qiskit.visualization import plot_histogram
import matplotlib.pyplot as plt



# ì„¤ì •
shots = 1024
backend = Aer.get_backend('aer_simulator')

# ì‹¤í—˜ íšŒë¡œ ìƒì„± í•¨ìˆ˜
def make_circuit(measure: bool):
    qc = QuantumCircuit(2, 2 if measure else 0)
    qc.h(0)
    qc.cx(0, 1)

    if measure:
        qc.measure([0, 1], [0, 1])
    else:
        qc.save_statevector()  # ìƒíƒœë²¡í„° ì €ì¥

    return qc

# íšŒë¡œ ìƒì„±
qc_with_measure = make_circuit(measure=True)
qc_without_measure = make_circuit(measure=False)

# íŠ¸ëœìŠ¤íŒŒì¼
qc_with_measure = transpile(qc_with_measure, backend)
qc_without_measure = transpile(qc_without_measure, backend)

# ì‹¤í–‰ (Qobj ì—†ì´ circuits ì§ì ‘ ì „ë‹¬)
result_with = backend.run(qc_with_measure, shots=shots).result()
result_without = backend.run(qc_without_measure).result()

# ê²°ê³¼
counts_with = result_with.get_counts()
statevector_without = result_without.get_statevector()

# ì¶œë ¥
print("ğŸ” [ì¸¡ì • ìˆìŒ] íšŒë¡œ ê²°ê³¼ (íˆìŠ¤í† ê·¸ë¨):")
plot_histogram(counts_with)
plt.show()

print("\nğŸ§ª [ì¸¡ì • ì—†ìŒ] íšŒë¡œ ìƒíƒœë²¡í„°:")
print(statevector_without)

