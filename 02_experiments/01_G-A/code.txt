#관측이 구조 유지에 기여하는가


%matplotlib inline
from qiskit import QuantumCircuit, Aer, transpile
from qiskit.visualization import plot_histogram
import matplotlib.pyplot as plt



# 설정
shots = 1024
backend = Aer.get_backend('aer_simulator')

# 실험 회로 생성 함수
def make_circuit(measure: bool):
    qc = QuantumCircuit(2, 2 if measure else 0)
    qc.h(0)
    qc.cx(0, 1)

    if measure:
        qc.measure([0, 1], [0, 1])
    else:
        qc.save_statevector()  # 상태벡터 저장

    return qc

# 회로 생성
qc_with_measure = make_circuit(measure=True)
qc_without_measure = make_circuit(measure=False)

# 트랜스파일
qc_with_measure = transpile(qc_with_measure, backend)
qc_without_measure = transpile(qc_without_measure, backend)

# 실행 (Qobj 없이 circuits 직접 전달)
result_with = backend.run(qc_with_measure, shots=shots).result()
result_without = backend.run(qc_without_measure).result()

# 결과
counts_with = result_with.get_counts()
statevector_without = result_without.get_statevector()

# 출력
print("🔍 [측정 있음] 회로 결과 (히스토그램):")
plot_histogram(counts_with)
plt.show()

print("\n🧪 [측정 없음] 회로 상태벡터:")
print(statevector_without)

